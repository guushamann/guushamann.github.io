(self["webpackChunkrs_fluor"]=self["webpackChunkrs_fluor"]||[]).push([[313],{6313:function(t,e,i){"use strict";function a(t){var e=t.split(" ").filter((function(t){return""!==t})).map((function(t){return parseInt(t)}));return!(e.length<1||e.length>4)&&e.every((function(t){return"number"==typeof t&&t>=0}))}function s(t){var e=t.split(" ").filter((function(t){return""!==t})).map((function(t){return parseInt(t)}));switch(e.length){case 4:return{top:e[0],right:e[1],bottom:e[2],left:e[3]};case 3:return{top:e[0],right:e[1],bottom:e[2],left:e[1]};case 2:return{top:e[0],right:e[1],bottom:e[0],left:e[1]};default:return{top:e[0],right:e[0],bottom:e[0],left:e[0]}}}i.r(e);var n={name:"TrendChartGrid",props:{boundary:{required:!0,type:Object},verticalLines:{default:!1,type:Boolean},verticalLinesNumber:{default:0,type:Number},horizontalLines:{default:!1,type:Boolean},horizontalLinesNumber:{default:0,type:Number}},methods:{setVerticalLinesParams:function(t){var e=this,i=e.boundary,a=e.verticalLinesNumber,s=a>1?(i.maxX-i.minX)/(a-1):0,n=i.minX+s*(t-1),r=i.minY,l=i.maxY;return{x1:n,x2:n,y1:r,y2:l,stroke:"rgba(0,0,0,0.1)"}},setHorizontalLinesParams:function(t){var e=this,i=e.boundary,a=e.horizontalLinesNumber,s=a>1?(i.maxY-i.minY)/(a-1):0,n=i.maxY-s*(t-1),r=i.minX,l=i.maxX;return{x1:r,x2:l,y1:n,y2:n,stroke:"rgba(0,0,0,0.1)"}}},render:function(t){if(this.verticalLines||this.horizontalLines){var e=[];if(this.verticalLines&&this.verticalLinesNumber>0){for(var i=[],a=1;a<=this.verticalLinesNumber;a++)i.push(t("line",{class:"line",attrs:Object.assign({},this.setVerticalLinesParams(a))}));e.push(t("g",{class:"vertical"},i))}if(this.horizontalLines&&this.horizontalLinesNumber>0){for(var s=[],n=1;n<=this.horizontalLinesNumber;n++)s.push(t("line",{class:"line",attrs:Object.assign({},this.setHorizontalLinesParams(n))}));e.push(t("g",{class:"horizontal"},s))}return t("g",e)}}},r={name:"TrendChartLabels",props:{boundary:{required:!0,type:Object},minValue:{type:Number},maxValue:{type:Number},xLabels:{type:Array},yLabels:{type:Number},yLabelsTextFormatter:{default:function(t){return t},type:Function}},data:function(){return{xLabelHeight:null,yLabelHeight:null}},methods:{setXLabelsParams:function(t){var e=this,i=e.boundary,a=e.xLabels,s=(i.maxX-i.minX)/(a.length-1),n=i.minX+s*t,r=i.maxY;return{transform:"translate("+n+", "+r+")"}},setYLabelsParams:function(t){var e=this,i=e.boundary,a=e.yLabels,s=(i.maxY-i.minY)/(a-1),n=i.minX,r=i.maxY-s*t;return{transform:"translate("+n+", "+r+")"}}},mounted:function(){this.xLabels&&this.xLabels.length&&(this.xLabelHeight=this.$refs.xLabels.querySelector("text").getBoundingClientRect().height),this.yLabels&&this.yLabels>0&&(this.yLabelHeight=this.$refs.yLabels.querySelector("text").getBoundingClientRect().height)},render:function(t){var e=this;if(this.xLabels&&this.xLabels.length||this.yLabels&&this.yLabels>0){var i=[];if(this.xLabels&&this.xLabels.length&&i.push(t("g",{class:"x-labels",ref:"xLabels"},this.xLabels.map((function(i,a){return t("g",{class:"label",attrs:Object.assign({},e.setXLabelsParams(a))},[t("text",{attrs:{dy:e.xLabelHeight+5,"text-anchor":"middle"}},i),t("line",{attrs:{stroke:"rgba(0,0,0,0.1)",y2:5}})])})))),this.yLabels&&this.yLabels>0){for(var a=[],s=0;s<this.yLabels;s++)a.push(t("g",{class:"label",attrs:Object.assign({},this.setYLabelsParams(s))},[t("text",{attrs:{dx:-10,dy:this.yLabelHeight/4,"text-anchor":"end"}},this.yLabelsTextFormatter(this.minValue+(this.maxValue-this.minValue)/(this.yLabels-1)*s)),t("line",{attrs:{stroke:"rgba(0,0,0,0.1)",x1:0,x2:-5}})]));i.push(t("g",{class:"y-labels",ref:"yLabels"},a))}return t("g",i)}}};function l(t,e,i,a,s){var n=e.minX,r=e.minY,l=e.maxX,o=e.maxY;t=t.map((function(t){return"number"===typeof t?t:t.value}));var h=a-.001,u=(l-n)/(s-1),m=(o-r)/(i+.001-h);return t.map((function(t,e){return{x:e*u+n,y:o-(t-h)*m+1e-5*+(e===s-1)-1e-5*+(0===e)}}))}function o(t,e,i){var a=i.maxY,s=[].concat(t),n=s.shift(),r=s[s.length-1],l=s[0].x-n.x,o=l/2,h="M "+n.x+","+n.y;s.forEach((function(t,i){if(e){var a=s[i-1]||n;h+=" C "+(o+a.x)+","+a.y+" "+(o+a.x)+","+t.y+" "+t.x+","+t.y}else h+=" L"+t.x+","+t.y}));var u=h;return r.Y!==a&&(u+=" L"+r.x+","+a),n.Y!==a&&(u+=" L"+n.x+","+a),u+=" Z",{linePath:h,fillPath:u}}var h={name:"TrendChartCurve",props:{boundary:{required:!0,type:Object},minValue:{required:!0,type:Number},maxValue:{required:!0,type:Number},maxAmount:{required:!0,type:Number},activeLineParams:{type:Object},data:{required:!0,type:Array},className:{type:String},smooth:{default:!1,type:Boolean},stroke:{default:!0,type:Boolean},fill:{default:!1,type:Boolean},showPoints:{default:!1,type:Boolean}},computed:{points:function(){return l(this.data,this.boundary,this.maxValue,this.minValue,this.maxAmount)},paths:function(){return o(this.points,this.smooth,this.boundary)}},render:function(t){var e=this,i=[];return this.fill&&this.paths&&this.paths.fillPath&&i.push(t("path",{class:"fill",attrs:{d:this.paths.fillPath,fill:"rgba(0,0,0,0.15)"}})),this.stroke&&this.paths&&this.paths.linePath&&i.push(t("path",{class:"stroke",attrs:{d:this.paths.linePath,fill:"none",stroke:"black"}})),this.showPoints&&this.points&&i.push(t("g",{class:"points"},this.points.map((function(i,a){return t("circle",{class:{point:!0,"is-active":e.activeLineParams&&e.activeLineParams.index===a},attrs:{cx:i.x,cy:i.y,r:2,stroke:"#000000","stroke-width":1}})})))),t("g",{class:this.className},i)}},u={name:"TrendChart",components:{TrendChartGrid:n,TrendChartLabels:r,TrendChartCurve:h},props:{datasets:{required:!0,type:Array},grid:{default:null,type:Object},labels:{default:null,type:Object},max:{type:Number},min:{type:Number},padding:{default:"5",type:String,validator:function(t){return a(t)}},interactive:{default:!1,type:Boolean}},data:function(){return{width:null,height:null,labelsOverflowObject:{top:0,right:0,bottom:0,left:0},activeLine:null,activeLineParams:null}},computed:{paddingObject:function(){return this.padding?s(this.padding):s("0")},boundary:function(){var t=this,e=t.width,i=t.height,a=t.paddingObject,s=t.labelsOverflowObject,n={minX:a.left+s.left,minY:a.top+s.top,maxX:e-a.right-s.right,maxY:i-a.bottom-s.bottom};return n},params:function(){var t=-1/0,e=1/0,i=0;return this.datasets.forEach((function(a){var s=a.data.map((function(t){return"number"===typeof t?t:t.value})),n=Math.max.apply(Math,s);n>t&&(t=n);var r=Math.min.apply(Math,s);r<e&&(e=r),s.length>i&&(i=s.length)})),void 0!==this.max&&this.max>t&&(t=this.max),void 0!==this.min&&this.min<e&&(e=this.min),{maxValue:t,minValue:e,maxAmount:i}},chartOverlayParams:function(){var t=this,e=t.boundary,i=e.maxX-e.minX,a=e.maxY-e.minY;return{x:e.minX,y:e.minY,width:i>0?i:0,height:a>0?a:0,opacity:0}},chartAxesXCoords:function(){for(var t=[],e=(this.boundary.maxX-this.boundary.minX)/(this.params.maxAmount-1),i=0;i<this.params.maxAmount;i++)t.push(e*i+this.boundary.minX);return t}},methods:{setSize:function(){var t=this.$refs["chart"].getBoundingClientRect();this.width=t.width,this.height=t.height},fitLabels:function(){var t=this.$refs["chart"],e=this.$refs["labels"];if(e&&(e.xLabels&&e.xLabels.length||e.yLabels>0)){var i=t.getBoundingClientRect(),a=e.$el.getBoundingClientRect(),s=i.top-a.top+this.paddingObject.top,n=a.right-i.right+this.paddingObject.right,r=a.bottom-i.bottom+this.paddingObject.bottom,l=this.paddingObject.left-a.left+i.left;this.labelsOverflowObject={top:s>0?s:0,right:n>0?n:0,bottom:r>0?r:0,left:l>0?l:0}}else this.labelsOverflowObject={top:0,right:0,bottom:0,left:0}},init:function(){var t=this;this.setSize(),this.$nextTick((function(){t.fitLabels()}))},getNearestCoordinate:function(t){return this.chartAxesXCoords.reduce((function(e,i){return Math.abs(e)>Math.abs(i-t)?i-t:e}),1/0)+t},mouseMove:function(t){var e=this.$refs.chart.getBoundingClientRect();this.activeLine=this.getNearestCoordinate(t.clientX-e.left)},mouseOut:function(){this.activeLine=null,this.activeLineParams=null},onWindowResize:function(){this.setSize()}},watch:{activeLine:function(t){var e=this,i=[];t&&(this.activeLineParams={index:this.chartAxesXCoords.indexOf(this.activeLine)},this.datasets.forEach((function(t){i.push(t.data[e.activeLineParams.index])}))),this.$emit("mouse-move",this.activeLineParams?Object.assign({},this.activeLineParams,{data:i}):null)},labels:{handler:function(){var t=this;this.labelsOverflowObject={top:0,right:0,bottom:0,left:0},this.$nextTick((function(){t.fitLabels()}))},deep:!0}},mounted:function(){this.init(),window.addEventListener("resize",this.onWindowResize)},destroyed:function(){window.removeEventListener("resize",this.onWindowResize)},render:function(t){var e=this,i=[];return this.grid&&i.push(t(n,{class:"grid",attrs:{verticalLines:this.grid.verticalLines,verticalLinesNumber:this.grid.verticalLinesNumber||this.params.maxAmount,horizontalLines:this.grid.horizontalLines,horizontalLinesNumber:this.grid.horizontalLinesNumber||this.labels&&this.labels.yLabels||0,boundary:this.boundary}})),this.interactive&&this.chartOverlayParams&&i.push(t("line",{class:"active-line",ref:"active-line",attrs:{x1:this.activeLine||this.boundary.minX,x2:this.activeLine||this.boundary.minX,y1:this.boundary.minY,y2:this.boundary.maxY,stroke:"black",visibility:this.activeLine?"visible":"hidden"}})),this.labels&&i.push(t(r,{class:"labels",ref:"labels",attrs:Object.assign({},this.labels,{boundary:this.boundary,minValue:this.params.minValue,maxValue:this.params.maxValue})})),this.datasets.map((function(a){i.push(t(h,{class:"curve",attrs:Object.assign({},a,{boundary:e.boundary,minValue:e.params.minValue,maxValue:e.params.maxValue,maxAmount:e.params.maxAmount,activeLineParams:e.activeLineParams})}))})),this.interactive&&this.chartOverlayParams&&i.push(t("rect",{ref:"interactive-area",attrs:Object.assign({},this.chartOverlayParams),on:{mousemove:function(t){return e.mouseMove(t)},mouseout:function(){return e.mouseOut()}}})),t("svg",{class:"vtc",ref:"chart",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"}},i)},install:function(t){t.component(u.name,u)}};"undefined"!==typeof window&&window.Vue&&window.Vue.use(u),e["default"]=u}}]);
//# sourceMappingURL=313.9696cb7e.js.map